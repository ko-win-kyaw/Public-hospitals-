<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Public Hospitals</title>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <style>
        :root { --danger: #e74c3c; --blue-main: #0033cc; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { margin: 0; padding-top: 250px; font-family: system-ui, -apple-system, sans-serif; background: #f5f5f5; }

        /* Fixed Top Section */
        .fixed-top-container { position: fixed; top: -25px; left: 0; width: 100%; z-index: 1000; background: #fff; }
        header { display: flex; align-items: center; justify-content: center; background: #fff; height: 80px; }
        .header-icon { width: 52px; height: auto; }
        .logo-text { font-size: 30px; color: #d32f2f; font-weight: bold; }
        .video-container { width: 100%; height: 150px; position: fixed; top: 40px; background: #000; }
        .db-video { width: 100%; height: 100%; object-fit: cover; }
        .buy-btn-overlay { position: absolute; top: 10px; left: 10px; z-index: 1010; padding: 5px 15px; background: #28a745; color: white; text-decoration: none; border-radius: 50px; font-size: 12px; border: 1px solid white; }

        /* Magic Box Overlay */
        #global-overlay { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0,0,0,0.4); backdrop-filter: blur(4px); display: flex; align-items: center; justify-content: center; z-index: 9999; }
        .magic-box { text-align: center; padding: 30px; background: linear-gradient(45deg, #ff0080, #ff8c00, #ffd700, #40e0d0, #9932cc); background-size: 400% 400%; border: 4px solid #fff; border-radius: 30px; color: #fff; width: 85%; max-width: 320px; animation: rainbowFlow 4s infinite, bounce 2s infinite; }
        @keyframes rainbowFlow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

        /* Content UI */
        .banner { margin: 15px 10px; font-size: 30px; padding: 20px; background: linear-gradient(135deg, var(--blue-main), #5dade2); border-radius: 15px; text-align: center; color: white; }
        .hospital-links { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-top: 15px; }
        .hospital-links a { text-decoration: none; background: #f00; color: #fff; padding: 8px 12px; border-radius: 8px; font-size: 20px; border: 1px solid #f3b64d; }
        .section { padding: 10px; }
        .card { display: flex; gap: 15px; background: #fff; padding: 15px; border-radius: 12px; border-left: 6px solid var(--danger); box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 15px; }

        /* Feedback UI (Updated) */
        .feedback-section { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; margin: 20px 10px; }
        .rating-display-box { margin-bottom: 20px; background: #fffde7; padding: 15px; border-radius: 15px; border: 2px dashed #fbc02d; }
        .star-rating { display: flex; flex-direction: row-reverse; justify-content: center; font-size: 45px; margin: 15px 0; }
        .star-rating input { display: none; }
        .star-rating label { color: #ddd; cursor: pointer; padding: 0 5px; }
        .star-rating input:checked ~ label, .star-rating label:hover, .star-rating label:hover ~ label { color: #ffd700; }
        .submit-btn { display: inline-block; background: #ffd700; color: #000; padding: 12px 50px; border-radius: 30px; font-weight: bold; cursor: pointer; border: none; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .notice { background: linear-gradient(180deg, lightblue, blue, blue, blue, blue, lightblue); color: white; text-align: center; padding: 15px; border: 5px solid #f00; border-radius: 10px; margin: 10px; }
    </style>
</head>
<body>

<div id="global-overlay" onclick="unmuteVideo()">
    <div class="magic-box">
        <div style="font-size: 30px;">âœ¨â­âœ¨</div>
        <h1 style="margin: 10px 0;">á€€á€¼á€­á€¯á€†á€­á€¯á€•á€«á€á€šá€º</h1>
        <div style="font-size: 60px; margin: 15px 0;">ğŸ</div>
        <p style="font-size: 18px; font-weight: bold;">á€¤á€”á€±á€›á€¬á€€á€­á€¯á€”á€¾á€­á€•á€ºá€•á€«</p>
    </div>
</div>

<div class="fixed-top-container">
    <header><img src="icon.png" class="header-icon"><span class="logo-text">Public Hospitals</span></header>
    <div class="video-container">
        <a href="tel:09675990009" class="buy-btn-overlay">á€á€šá€ºá€™á€Šá€º</a>
        <video id="mainVideo" class="db-video" muted loop playsinline autoplay>
            <source src="https://www.dropbox.com/scl/fi/um9sekhcdzyf1tne0i743/h2.mp4?rlkey=d1nrtwy7r528yb7i3wkuovn0l&st=at0wmwzx&raw=1" type="video/mp4">
        </video>
    </div>
</div>

<section class="banner">
    <h2>á€•á€¼á€Šá€ºá€á€°á€·á€€á€»á€”á€ºá€¸á€™á€¬á€›á€±á€¸</h2>
    <div class="hospital-links">
        <a href="yhospital.html">á€›á€”á€ºá€€á€¯á€”á€ºá€•á€¼á€Šá€ºá€á€°á€·á€†á€±á€¸á€›á€¯á€¶á€€á€¼á€®á€¸</a>
        <a href="mhospital.html">á€™á€¼á€±á€¬á€€á€ºá€¥á€€á€¹á€€á€œá€¬á€•á€†á€±á€¸á€›á€¯á€¶á€€á€¼á€®á€¸</a>
        <a href="ihospital.html">á€¡á€„á€ºá€¸á€…á€­á€”á€ºá€†á€±á€¸á€›á€¯á€¶á€€á€¼á€®á€¸</a>
        <a href="thospital.html">á€á€„á€ºá€¹á€€á€”á€ºá€¸á€€á€»á€½á€”á€ºá€¸á€†á€±á€¸á€›á€¯á€¶á€€á€¼á€®á€¸</a>
        <a href="lhospital.html">á€œá€¾á€­á€¯á€„á€ºá€á€¬á€šá€¬á€†á€±á€¸á€›á€¯á€¶á€€á€¼á€®á€¸</a>
        <a href="shospital.html">á€›á€½á€¾á€±á€•á€¼á€Šá€ºá€á€¬á€†á€±á€¸á€›á€¯á€¶á€€á€¼á€®á€¸</a>
        <a href="dhospital.html">á€‡á€®á€á€­á€á€’á€«á€”á€á€¶á€ƒá€¬á€·á€†á€±á€¸á€›á€¯á€¶á€€á€¼á€®á€¸</a>
        <a href="hhospital.html">á€¡á€‘á€°á€¸á€€á€¯á€†á€±á€¸á€›á€¯á€¶á€™á€»á€¬á€¸</a>
        <a href="bhospital.html">á€€á€œá€±á€¸á€†á€±á€¸á€›á€¯á€¶á€™á€»á€¬á€¸</a>
        <a href="khospital.html">á€†á€±á€¸á€•á€Šá€¬</a>
        <a href="phospital.html">Promotion</a>
        <a href="user.html">Users</a>
        <a href="tun.html">á€‘á€½á€”á€ºá€¸á€¡á€á€™á€²á€·á€†á€±á€¸á€á€”á€ºá€¸á€™á€»á€¬á€¸</a>
        <a href="eye.html">á€™á€»á€€á€ºá€…á€­á€¡á€á€™á€²á€· á€á€½á€²á€…á€­á€á€ºá€á€”á€ºá€¸á€™á€»á€¬á€¸</a>
    </div>
</section>
<section class="section">
    <div class="card">
        <div class="card-icon">ğŸ¦Ÿ</div>
        <div><h3>[ á€›á€¬á€á€®á€¡á€œá€­á€¯á€€á€º á€€á€»á€”á€ºá€¸á€™á€¬á€›á€±á€¸ ]</h3><p>á€á€½á€±á€¸á€œá€½á€”á€ºá€á€¯á€•á€ºá€€á€½á€±á€¸ á€€á€¬á€€á€½á€šá€ºá€›á€”á€º á€á€¼á€„á€ºá€‘á€±á€¬á€„á€ºá€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€•á€«á‹á€œá€¯á€¶á€á€¼á€¯á€¶á€…á€½á€¬á€á€á€ºá€†á€„á€ºá€•á€«á‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸ</div>
        <div><h3>[ á€™á€¼á€½á€±á€€á€­á€¯á€€á€ºá€á€¼á€„á€ºá€¸ ]</h3><p>á€™á€œá€¾á€¯á€•á€ºá€›á€¾á€¬á€¸á€•á€«á€”á€¾á€„á€·á€ºáŠ á€†á€±á€¸á€›á€¯á€¶á€á€­á€¯á€· á€¡á€™á€¼á€”á€ºá€†á€¯á€¶á€¸á€•á€­á€¯á€·á€†á€±á€¬á€„á€ºá€•á€«á‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">âš¡</div>
        <div><h3>[ á€œá€»á€¾á€•á€ºá€…á€…á€ºá€’á€á€ºá€á€¶á€›á€•á€«á€€ ]</h3><p>ğŸ”Œ á€¡á€›á€„á€ºá€¸á€¡á€™á€¼á€…á€ºá€–á€¼á€á€ºá€•á€«á‹ ğŸš« á€™á€‘á€­á€•á€«á€”á€¾á€„á€·á€ºá‹ ğŸªµ á€á€…á€ºá€á€¬á€¸á€á€¯á€á€ºá€–á€¼á€„á€·á€ºá€á€½á€¬á€•á€«á‹ ğŸ¥ á€†á€±á€¸á€›á€¯á€¶á€•á€­á€¯á€·á€•á€«á‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸŒ¡ï¸</div>
        <div><h3>[ á€¡á€•á€°á€œá€½á€”á€ºá€€á€²á€á€¼á€„á€ºá€¸ ]</h3><p>â˜€ï¸ á€¡á€±á€¸á€á€±á€¬á€”á€±á€›á€¬á€•á€­á€¯á€·á€•á€«á‹ ğŸ§Š á€›á€±á€á€²á€¡á€­á€á€ºá€€á€•á€ºá€•á€«á‹ ğŸš« á€á€á€­á€œá€…á€ºá€œá€»á€¾á€„á€º á€›á€±á€™á€á€­á€¯á€€á€ºá€•á€«á€”á€¾á€„á€·á€ºá‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸ¤¢</div>
        <div><h3>[ á€¡á€…á€¬á€¡á€†á€­á€•á€ºá€á€„á€·á€ºá€á€¼á€„á€ºá€¸ ]</h3><p>ğŸš« á€¡á€”á€ºá€¡á€±á€¬á€„á€º á€™á€œá€¯á€•á€ºá€•á€«á€”á€¾á€„á€·á€ºá‹ ğŸ’§ á€›á€±á€á€”á€·á€ºá€¡á€”á€Šá€ºá€¸á€„á€šá€ºá€á€­á€¯á€€á€ºá€•á€«á‹ ğŸ¥ á€†á€±á€¸á€›á€¯á€¶á€•á€­á€¯á€·á€•á€«á‹</p></div>
    </div>
    <div class="card">
        <div class="card-icon">ğŸ§ </div>
        <div><h3>[ á€á€±á€«á€„á€ºá€¸á€‘á€­á€á€­á€¯á€€á€ºá€’á€á€ºá€›á€¬ ]</h3><p>ğŸš« á€™á€œá€¾á€¯á€•á€ºá€›á€¾á€¬á€¸á€…á€±á€•á€«á€”á€¾á€„á€·á€ºá‹ ğŸ©¹ á€á€½á€±á€¸á€‘á€½á€€á€ºá€•á€«á€€ á€–á€­á€‘á€¬á€¸á€•á€«á‹ ğŸ¥ á€™á€°á€¸á€á€±á€¡á€”á€ºá€œá€»á€¾á€„á€º á€†á€±á€¸á€›á€¯á€¶á€•á€­á€¯á€·á€•á€«á‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸ”¥</div>
        <div><h3>[ á€¡á€•á€°á€œá€±á€¬á€„á€ºá€œá€»á€¾á€„á€º ]</h3><p>á€›á€±á€¡á€±á€¸á€–á€¼á€„á€·á€º áá€ á€™á€­á€”á€…á€ºá€œá€±á€¬á€„á€ºá€¸á€•á€«á‹ á€á€½á€¬á€¸á€á€­á€¯á€€á€ºá€†á€±á€¸/á€†á€®á€™á€œá€­á€™á€ºá€¸á€•á€«á€”á€¾á€„á€·á€ºá‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸ˜´</div>
        <div><h3>[ á€¡á€­á€•á€ºá€…á€€á€ºá€á€¼á€„á€ºá€¸ ]</h3><p>á€á€…á€ºá€”á€±á€· á‡-áˆ á€”á€¬á€›á€®á€¡á€­á€•á€ºá€•á€«á‹ á€¡á€­á€•á€ºá€›á€±á€¸á€•á€»á€€á€ºá€œá€»á€¾á€„á€º á€”á€¾á€œá€¯á€¶á€¸á€”á€¾á€„á€·á€ºá€†á€®á€¸á€á€»á€­á€¯ á€–á€¼á€…á€ºá€”á€­á€¯á€„á€ºá€á€¼á€±á€™á€»á€¬á€¸á€•á€«á€á€šá€ºá‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸ¥—</div>
        <div><h3>[ á€™á€»á€¾á€á€á€±á€¬ á€¡á€…á€¬á€¸á€¡á€…á€¬ ]</h3><p>á€¡á€„á€”á€ºá€”á€¾á€„á€·á€ºá€¡á€†á€®á€œá€»á€¾á€±á€¬á€·á€…á€¬á€¸á€•á€«á‹ á€¡á€á€®á€¸á€¡á€›á€½á€€á€ºá€™á€»á€¬á€¸á€™á€»á€¬á€¸á€…á€¬á€¸á€•á€«á‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸ©¸</div>
        <div><h3>[ á€á€½á€±á€¸á€‘á€½á€€á€ºá€œá€½á€”á€ºá€œá€»á€¾á€„á€º ]</h3><p>á€á€”á€·á€ºá€›á€¾á€„á€ºá€¸á€á€±á€¬á€¡á€á€á€ºá€–á€¼á€„á€·á€º á€–á€­á€‘á€¬á€¸á€•á€«á‹ á€”á€¾á€œá€¯á€¶á€¸á€‘á€€á€ºá€™á€¼á€„á€·á€ºá€¡á€±á€¬á€„á€º á€‘á€¬á€¸á€•á€«á‹</p></div>
    </div>
    <div class="card first-aid">
        <div class="card-icon">ğŸ§ </div>
        <div><h3>[ á€œá€±á€–á€¼á€á€ºá€á€Šá€·á€ºá€œá€€á€¹á€á€á€¬ ]</h3><p>á€™á€»á€€á€ºá€”á€¾á€¬á€›á€½á€²á€·á€á€¼á€„á€ºá€¸áŠ á€œá€€á€ºá€™á€™á€¼á€¾á€±á€¬á€€á€ºá€”á€­á€¯á€„á€ºá€á€¼á€„á€ºá€¸áŠ á€…á€€á€¬á€¸á€—á€œá€¯á€¶á€¸á€—á€‘á€½á€±á€¸á€–á€¼á€…á€ºá€œá€»á€¾á€„á€º á€á€»á€€á€ºá€á€»á€„á€ºá€¸á€†á€±á€¸á€›á€¯á€¶á€á€½á€¬á€¸á€•á€«á‹</p></div>
    </div>
</section>
<div class="feedback-section">
    <div class="rating-display-box">
        <div style="font-size: 22px; font-weight: bold; color: #f57f17;">â­ App Rating: <span id="avgStars">0.0</span> / 5.0</div>
        <div style="font-size: 14px; color: #666; margin-top: 5px;">(á€…á€¯á€…á€¯á€•á€±á€«á€„á€ºá€¸á€•á€±á€¸á€á€°: <span id="totalVoters">0</span> á€¦á€¸)</div>
    </div>

    <label style="font-weight: bold; font-size: 18px;">á€¡á€†á€„á€·á€ºá€á€á€ºá€™á€¾á€á€ºá€•á€±á€¸á€›á€”á€º (Rating)</label>
    <div class="star-rating">
        <input type="radio" name="rating" id="star5" value="5"><label for="star5">â˜…</label>
        <input type="radio" name="rating" id="star4" value="4"><label for="star4">â˜…</label>
        <input type="radio" name="rating" id="star3" value="3"><label for="star3">â˜…</label>
        <input type="radio" name="rating" id="star2" value="2"><label for="star2">â˜…</label>
        <input type="radio" name="rating" id="star1" value="1"><label for="star1">â˜…</label>
    </div>
    <button type="button" class="submit-btn" onclick="sendRatingOnly()">á€•á€­á€¯á€·á€™á€Šá€º</button>
</div>

<footer class="notice">á€€á€»á€”á€ºá€¸á€™á€¬á€›á€±á€¸á€¡á€á€½á€€á€º <strong>á€†á€±á€¸á€›á€¯á€¶á€¡á€™á€Šá€º</strong>á€€á€­á€¯ á€”á€¾á€­á€•á€ºá€•á€¼á€®á€¸ á€¡á€á€±á€¸á€…á€­á€á€º á€€á€¼á€Šá€·á€ºá€›á€¾á€¯á€”á€­á€¯á€„á€ºá€•á€«á€á€Šá€ºá‹</footer>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyD4Yiez3VXKD90za0wnt03lFPjeln4su7U",
        authDomain: "hospital-app-caf85.firebaseapp.com",
        projectId: "hospital-app-caf85",
        storageBucket: "hospital-app-caf85.firebasestorage.app",
        messagingSenderId: "736486429191",
        appId: "1:736486429191:web:25c116beb3994d213cd0a2",
        measurementId: "G-G2ZW22W3BM"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const auth = firebase.auth();

    // áá‹ Real-time Rating á€•á€¼á€á€™á€Šá€·á€ºá€…á€”á€…á€º
    function loadRatings() {
        db.collection("app_feedback").onSnapshot((snapshot) => {
            let total = 0;
            let count = snapshot.size;
            snapshot.forEach(doc => { total += doc.data().rating; });
            const avg = count > 0 ? (total / count).toFixed(1) : "0.0";
            document.getElementById("avgStars").innerText = avg;
            document.getElementById("totalVoters").innerText = count;
        });
    }
    loadRatings();

    // á‚á‹ Anonymous Login (Permissions á€¡á€á€½á€€á€º)
    auth.onAuthStateChanged((user) => {
        if (!user) auth.signInAnonymously();
    });

    // áƒá‹ Video Unmute Logic (á€™á€°á€œá€¡á€á€­á€¯á€„á€ºá€¸)
    function unmuteVideo() {
        const video = document.getElementById("mainVideo");
        const overlay = document.getElementById("global-overlay");
        video.muted = false;
        overlay.style.display = "none";
        video.play();
    }

    // á„á‹ Rating á€•á€­á€¯á€·á€•á€¼á€®á€¸ User Page á€á€­á€¯á€· á€œá€½á€¾á€á€ºá€™á€Šá€·á€º Logic
    async function sendRatingOnly() {
        const ratingInput = document.querySelector('input[name="rating"]:checked');
        const rating = ratingInput ? parseInt(ratingInput.value) : 0;

        if (rating === 0) return alert("á€€á€¼á€šá€ºá€•á€½á€„á€·á€ºá€œá€±á€¸ á€”á€¾á€­á€•á€ºá€•á€±á€¸á€•á€«á€¦á€¸");

        try {
            if (!auth.currentUser) await auth.signInAnonymously();
            
            await db.collection("app_feedback").doc(auth.currentUser.uid).set({
                rating: rating,
                userId: auth.currentUser.uid,
                createdAt: Date.now()
            });

            alert("Rating á€•á€±á€¸á€á€²á€·á€™á€¾á€¯á€¡á€á€½á€€á€º á€€á€»á€±á€¸á€‡á€°á€¸á€á€„á€ºá€•á€«á€á€šá€º!");
            window.location.href = "user.html"; 
        } catch (e) {
            alert("Error: " + e.message);
        }
    }
</script>
</body>
</html>
